/** @jsxImportSource @wsxjs/wsx-core */
/**
 * ç®€å•çš„å“åº”å¼æ¼”ç¤ºç»„ä»¶
 * å±•ç¤º WSX å“åº”å¼çŠ¶æ€ç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½
 * ä½¿ç”¨ @state è£…é¥°å™¨è‡ªåŠ¨åˆå§‹åŒ–å“åº”å¼çŠ¶æ€
 */

import { WebComponent, state, autoRegister, createLogger } from "@wsxjs/wsx-core";

const logger = createLogger("SimpleReactiveDemo");

@autoRegister({ tagName: "simple-reactive-demo" })
export default class SimpleReactiveDemo extends WebComponent {
    // ä½¿ç”¨ @state è£…é¥°å™¨ - è‡ªåŠ¨åˆå§‹åŒ–ä¸ºå“åº”å¼çŠ¶æ€
    @state private state = {
        count: 0,
        message: "Click the button!",
    };

    constructor() {
        super();
        logger.info("SimpleReactiveDemo initialized");
    }

    render() {
        return (
            <div style="padding: 20px; border: 1px solid #ccc; border-radius: 8px; margin: 20px;">
                <h3>ğŸ“± Simple Reactive Demo</h3>
                <p>{this.state.message}</p>
                <div style="font-size: 24px; margin: 16px 0;">
                    Count: <strong>{this.state.count}</strong>
                </div>
                <div>
                    <button onClick={this.increment} style="margin-right: 8px; padding: 8px 16px;">
                        + Increment
                    </button>
                    <button onClick={this.reset} style="padding: 8px 16px;">
                        ğŸ”„ Reset
                    </button>
                </div>
                <div style="margin-top: 16px; font-size: 12px; color: #666;">
                    ğŸ’¡ State changes automatically trigger re-renders!
                </div>
            </div>
        );
    }

    private increment = () => {
        this.state.count++;
        this.state.message = `Clicked ${this.state.count} time${this.state.count === 1 ? "" : "s"}!`;
        // æ³¨æ„ï¼šä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ this.rerender()ï¼
    };

    private reset = () => {
        this.state.count = 0;
        this.state.message = "Reset! Click again!";
        // æ³¨æ„ï¼šè¿™é‡Œä¹Ÿä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ this.rerender()ï¼
    };
}
